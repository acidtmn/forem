---
http_interactions:
- request:
    method: get
    uri: https://gitlab.com/api/v4/projects/gitlab-org%2Fgitlab/issues/1
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Fri, 03 Apr 2020 14:25:59 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Cache-Control:
      - max-age=0, private, must-revalidate
      Etag:
      - W/"9effabea58aa47c19cceaec6a5a55c30"
      Vary:
      - Origin
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-Request-Id:
      - 7ki2Qf0OhMa
      X-Runtime:
      - '0.091053'
      Strict-Transport-Security:
      - max-age=31536000
      Referrer-Policy:
      - strict-origin-when-cross-origin
      Ratelimit-Limit:
      - '600'
      Ratelimit-Observed:
      - '1'
      Ratelimit-Remaining:
      - '599'
      Ratelimit-Reset:
      - '1585924018'
      Ratelimit-Resettime:
      - Fri, 03 Apr 2020 14:26:58 GMT
      Gitlab-Lb:
      - fe-18-lb-gprd
      Gitlab-Sv:
      - localhost
      Cf-Cache-Status:
      - DYNAMIC
      Expect-Ct:
      - max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"
      Server:
      - cloudflare
      Cf-Ray:
      - 57e376466a56f2e0-WAW
    body:
      encoding: ASCII-8BIT
      string: '{"id":382515,"iid":1,"project_id":278964,"title":"500 error on MR approvers
        edit page","description":"Observed on gitlab.com.\r\n\r\n```\r\nworker2 production.log:
        Completed 500 Internal Server Error in 287ms (ActiveRecord: 11.7ms)\r\nworker2
        production.log: \r\nworker2 production.log: ActionView::Template::Error (undefined
        method `name'' for nil:NilClass):\r\nworker2 production.log:     54:         %ul.well-list\r\nworker2
        production.log:     55:           - @project.approvers.each do |approver|\r\nworker2
        production.log:     56:             %li\r\nworker2 production.log:     57:               =
        link_to approver.user.name, approver.user\r\nworker2 production.log:     58:               .pull-right\r\nworker2
        production.log:     59:                 = link_to namespace_project_approver_path(@project.namespace,
        @project, approver), data: { confirm: \"Are you sure you want to remove approver
        #{approver.user.name}\"}, method: :delete, class: \"btn-xs btn btn-remove\",
        title: ''Remove approver'' do\r\nworker2 production.log:     60:                   =
        icon(\"sign-out\")\r\nworker2 production.log:   app/views/projects/_merge_request_settings.html.haml:57:in
        `block in _app_views_projects__merge_request_settings_html_haml___545752523034962009_57962180''\r\n```\r\n\r\nI
        checked the Rails console, this project has a number of approvers but the
        user ID of the last one is 0.\r\n\r\ncc @sytses @vsizov ","state":"closed","created_at":"2015-07-30T14:27:48.903Z","updated_at":"2020-04-03T12:23:57.809Z","closed_at":"2018-02-15T17:37:22.828Z","closed_by":null,"labels":["Enterprise
        Edition"],"milestone":null,"assignees":[],"author":{"id":5302,"name":"Jacob
        Vosmaer","username":"jacobvosmaer","state":"active","avatar_url":"https://secure.gravatar.com/avatar/e66d11c0eedf8c07b3b18fca46599807?s=80\u0026d=identicon","web_url":"https://gitlab.com/jacobvosmaer"},"assignee":null,"user_notes_count":28,"merge_requests_count":1,"upvotes":0,"downvotes":0,"due_date":null,"confidential":false,"discussion_locked":null,"web_url":"https://gitlab.com/gitlab-org/gitlab/-/issues/1","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"task_completion_status":{"count":0,"completed_count":0},"weight":null,"has_tasks":false,"_links":{"self":"https://gitlab.com/api/v4/projects/278964/issues/1","notes":"https://gitlab.com/api/v4/projects/278964/issues/1/notes","award_emoji":"https://gitlab.com/api/v4/projects/278964/issues/1/award_emoji","project":"https://gitlab.com/api/v4/projects/278964"},"references":{"short":"#1","relative":"#1","full":"gitlab-org/gitlab#1"},"subscribed":false,"moved_to_id":null,"epic_iid":null,"epic":null}'
    http_version: null
  recorded_at: Fri, 03 Apr 2020 14:25:59 GMT
- request:
    method: post
    uri: https://gitlab.com/api/v4/markdown
    body:
      encoding: UTF-8
      string: text=Observed%20on%20gitlab.com.%0D%0A%0D%0A%60%60%60%0D%0Aworker2%20production.log%3A%20Completed%20500%20Internal%20Server%20Error%20in%20287ms%20%28ActiveRecord%3A%2011.7ms%29%0D%0Aworker2%20production.log%3A%20%0D%0Aworker2%20production.log%3A%20ActionView%3A%3ATemplate%3A%3AError%20%28undefined%20method%20%60name%27%20for%20nil%3ANilClass%29%3A%0D%0Aworker2%20production.log%3A%20%20%20%20%2054%3A%20%20%20%20%20%20%20%20%20%25ul.well-list%0D%0Aworker2%20production.log%3A%20%20%20%20%2055%3A%20%20%20%20%20%20%20%20%20%20%20-%20%40project.approvers.each%20do%20%7Capprover%7C%0D%0Aworker2%20production.log%3A%20%20%20%20%2056%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%25li%0D%0Aworker2%20production.log%3A%20%20%20%20%2057%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3D%20link_to%20approver.user.name%2C%20approver.user%0D%0Aworker2%20production.log%3A%20%20%20%20%2058%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20.pull-right%0D%0Aworker2%20production.log%3A%20%20%20%20%2059%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3D%20link_to%20namespace_project_approver_path%28%40project.namespace%2C%20%40project%2C%20approver%29%2C%20data%3A%20%7B%20confirm%3A%20%22Are%20you%20sure%20you%20want%20to%20remove%20approver%20%23%7Bapprover.user.name%7D%22%7D%2C%20method%3A%20%3Adelete%2C%20class%3A%20%22btn-xs%20btn%20btn-remove%22%2C%20title%3A%20%27Remove%20approver%27%20do%0D%0Aworker2%20production.log%3A%20%20%20%20%2060%3A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%3D%20icon%28%22sign-out%22%29%0D%0Aworker2%20production.log%3A%20%20%20app%2Fviews%2Fprojects%2F_merge_request_settings.html.haml%3A57%3Ain%20%60block%20in%20_app_views_projects__merge_request_settings_html_haml___545752523034962009_57962180%27%0D%0A%60%60%60%0D%0A%0D%0AI%20checked%20the%20Rails%20console%2C%20this%20project%20has%20a%20number%20of%20approvers%20but%20the%20user%20ID%20of%20the%20last%20one%20is%200.%0D%0A%0D%0Acc%20%40sytses%20%40vsizov%20&project=gitlab-org%2Fgitlab
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 201
      message: Created
    headers:
      Date:
      - Fri, 03 Apr 2020 14:25:59 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '1528'
      Connection:
      - keep-alive
      Cache-Control:
      - max-age=0, private, must-revalidate
      Etag:
      - W/"1952ded9445265e6681a7a2952b2bc06"
      Vary:
      - Origin
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-Request-Id:
      - YQ2fpPRC1J5
      X-Runtime:
      - '0.024770'
      Strict-Transport-Security:
      - max-age=31536000
      Referrer-Policy:
      - strict-origin-when-cross-origin
      Ratelimit-Limit:
      - '600'
      Ratelimit-Observed:
      - '1'
      Ratelimit-Remaining:
      - '599'
      Ratelimit-Reset:
      - '1585924019'
      Ratelimit-Resettime:
      - Fri, 03 Apr 2020 14:26:59 GMT
      Gitlab-Lb:
      - fe-07-lb-gprd
      Gitlab-Sv:
      - localhost
      Cf-Cache-Status:
      - DYNAMIC
      Expect-Ct:
      - max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"
      Server:
      - cloudflare
      Cf-Ray:
      - 57e37648ccc4b827-WAW
    body:
      encoding: UTF-8
      string: '{"html":"\u003cp data-sourcepos=\"1:1-1:23\"\u003eObserved on gitlab.com.\u003c/p\u003e\n\u003cpre
        data-sourcepos=\"3:1-15:3\"\u003e\u003ccode\u003eworker2 production.log: Completed
        500 Internal Server Error in 287ms (ActiveRecord: 11.7ms)\nworker2 production.log:
        \nworker2 production.log: ActionView::Template::Error (undefined method `name''
        for nil:NilClass):\nworker2 production.log:     54:         %ul.well-list\nworker2
        production.log:     55:           - @project.approvers.each do |approver|\nworker2
        production.log:     56:             %li\nworker2 production.log:     57:               =
        link_to approver.user.name, approver.user\nworker2 production.log:     58:               .pull-right\nworker2
        production.log:     59:                 = link_to namespace_project_approver_path(@project.namespace,
        @project, approver), data: { confirm: \"Are you sure you want to remove approver
        #{approver.user.name}\"}, method: :delete, class: \"btn-xs btn btn-remove\",
        title: ''Remove approver'' do\nworker2 production.log:     60:                   =
        icon(\"sign-out\")\nworker2 production.log:   app/views/projects/_merge_request_settings.html.haml:57:in
        `block in _app_views_projects__merge_request_settings_html_haml___545752523034962009_57962180''\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp
        data-sourcepos=\"17:1-17:105\"\u003eI checked the Rails console, this project
        has a number of approvers but the user ID of the last one is 0.\u003c/p\u003e\n\u003cp
        data-sourcepos=\"19:1-19:19\"\u003ecc @sytses @vsizov\u003c/p\u003e"}'
    http_version: null
  recorded_at: Fri, 03 Apr 2020 14:25:59 GMT
- request:
    method: get
    uri: https://gitlab.com/api/v4/projects/gitlab-org%2Fgitlab/merge_requests/1
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Fri, 03 Apr 2020 14:44:09 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Cache-Control:
      - max-age=0, private, must-revalidate
      Etag:
      - W/"ce1a751842d098287ba8fc743bc614bd"
      Vary:
      - Origin
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-Request-Id:
      - v2bRQP1SjC3
      X-Runtime:
      - '0.095518'
      Strict-Transport-Security:
      - max-age=31536000
      Referrer-Policy:
      - strict-origin-when-cross-origin
      Ratelimit-Limit:
      - '600'
      Ratelimit-Observed:
      - '1'
      Ratelimit-Remaining:
      - '599'
      Ratelimit-Reset:
      - '1585925109'
      Ratelimit-Resettime:
      - Fri, 03 Apr 2020 14:45:09 GMT
      Gitlab-Lb:
      - fe-20-lb-gprd
      Gitlab-Sv:
      - localhost
      Cf-Cache-Status:
      - DYNAMIC
      Expect-Ct:
      - max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"
      Server:
      - cloudflare
      Cf-Ray:
      - 57e390e5b818f2dc-WAW
    body:
      encoding: ASCII-8BIT
      string: '{"id":83382,"iid":1,"project_id":278964,"title":"Enhance the LDAP group
        synchronization","description":"The response of our company''s LDAP for a
        group looks like this:\r\n```\r\ndn: \u003cdn-of-the-selected-group\u003e\r\ncn:
        \u003cname-of-the-selected-group\u003e\r\nsubmember: uid=\u003cusername-of-a-submember\u003e\r\nmember:
        uid=\u003cusername-of-a-member\u003e\r\n```\r\nSo the current implementation
        of the LDAP group synchronization in GitLab can''t find any registered user
        in such a group. This merge request will fix this.\r\n\r\nThis is a \"copy\"
        of this merge request https://gitlab.com/subscribers/gitlab-ee/merge_requests/27
        that was in the wrong repository.","state":"merged","created_at":"2015-05-21T10:06:50.733Z","updated_at":"2019-11-01T15:00:00.881Z","merged_by":null,"merged_at":null,"closed_by":null,"closed_at":null,"target_branch":"master","source_branch":"master","user_notes_count":7,"upvotes":0,"downvotes":0,"assignee":{"id":116,"name":"Marin
        Jankovski","username":"marin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5154f0b0eda3f798c8a254962d57192f?s=80\u0026d=identicon","web_url":"https://gitlab.com/marin"},"author":{"id":87381,"name":"Thilo
        Ognibeni","username":"1and1_ebusiness","state":"active","avatar_url":"https://secure.gravatar.com/avatar/d6e7f8323aebc71350f7bdad6c7c3b6b?s=80\u0026d=identicon","web_url":"https://gitlab.com/1and1_ebusiness"},"assignees":[{"id":116,"name":"Marin
        Jankovski","username":"marin","state":"active","avatar_url":"https://secure.gravatar.com/avatar/5154f0b0eda3f798c8a254962d57192f?s=80\u0026d=identicon","web_url":"https://gitlab.com/marin"}],"source_project_id":280344,"target_project_id":278964,"labels":["Enterprise
        Edition"],"work_in_progress":false,"milestone":null,"merge_when_pipeline_succeeds":false,"merge_status":"can_be_merged","sha":"0e91c7eb0fd77e56b7cfdd4fd0be0fce9e1c8a6c","merge_commit_sha":null,"squash_commit_sha":null,"discussion_locked":null,"should_remove_source_branch":null,"force_remove_source_branch":null,"allow_collaboration":null,"allow_maintainer_to_push":null,"reference":"!1","references":{"short":"!1","relative":"!1","full":"gitlab-org/gitlab!1"},"web_url":"https://gitlab.com/gitlab-org/gitlab/-/merge_requests/1","time_stats":{"time_estimate":0,"total_time_spent":0,"human_time_estimate":null,"human_total_time_spent":null},"squash":false,"task_completion_status":{"count":0,"completed_count":0},"has_conflicts":false,"blocking_discussions_resolved":true,"approvals_before_merge":null,"subscribed":false,"changes_count":null,"latest_build_started_at":null,"latest_build_finished_at":null,"first_deployed_to_production_at":null,"pipeline":null,"head_pipeline":null,"diff_refs":null,"merge_error":null,"user":{"can_merge":false}}'
    http_version: null
  recorded_at: Fri, 03 Apr 2020 14:44:09 GMT
recorded_with: VCR 5.1.0
