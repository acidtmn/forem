<div class="row m-3">
  <div class="col">
    <%= form_tag(internal_page_redirects_path, method: "get") do %>
      <div class="form-row justify-content-end">
        <div class="form-group">
          <%= text_field_tag(:search, params[:search], placeholder: "Old or new slug") %>
          <%= submit_tag("Search") %>
        </div>
      </div>
    <% end %>
  </div>
</div>

<%= paginate @page_redirects %>

<table class="table">
  <thead>
    <tr>
      <th scope="col">ID</th>
      <th scope="col">Old Slug</th>
      <th scope="col">New Slug</th>
      <th scope="col">Overridden</th>
      <th scope="col">Version</th>
    </tr>
  </thead>
  <tbody>
    <% @page_redirects.each do |page_redirect| %>
      <% bg_color_class =
           if page_redirect.version <= 3
             "success"
           elsif page_redirect.version <= 5
             "warning"
           else
             "danger"
           end %>

      <tr>
        <td><%= link_to(page_redirect.id, internal_page_redirects_path(page_redirect.id)) %></td>
        <td><%= page_redirect.old_slug %></td>
        <td><%= page_redirect.new_slug %></td>
        <td><%= page_redirect.overridden %></td>
        <td class="bg-<%= bg_color_class %>"><%= page_redirect.version %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<%= paginate @page_redirects %>
