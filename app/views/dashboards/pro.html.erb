<% title "Pro Analytics" %>

<div class="dashboard-container pro-container" id="user-dashboard">
  <a href="/dashboard" class="rounded-btn rounded-btn--transparent">👈 Back to Main Dashboard</a>

  <a class="rounded-btn <%= "active" unless params[:org_id] %>" href="/dashboard/pro">
    Your Pro Dashboard
  </a>

  <% @organizations.each do |org| %>
    <a
      class="rounded-btn organization <%= "active" if params[:org_id].to_i == org.id %>"
      href="/dashboard/pro/org/<%= org.id %>"
      data-organization-id="<%= org.id %>">
      <%= org.name %> Pro Dashboard
    </a>
  <% end %>

  <section class="header-card card">
    <h1 class="pro-header">Pro Dashboard for <%= @user_or_org.name %></h1>
    <p>Welcome to the Pro Dashboard which shows in-depth user metrics so that authors can make data-driven decisions about the developer ecosystem.</p>
    <p>This dashboard will highlight deep insights especially relevant to developer relations authors and serious bloggers.</p>
  </section>

  <div class="toggles">
    <button class="selected timerange-button" id="week-button">Week</button>
    <button class="timerange-button" id="month-button">Month</button>
    <button class="timerange-button" id="infinity-button">Infinity</button>
  </div>

  <div class="summary-stats">
    <div class="card" id="readers-card"></div>
    <div class="card" id="reactions-card"></div>
    <div class="card" id="comments-card"></div>
    <div class="card" id="followers-card"></div>
  </div>

  <div class="graphs">
    <div class="row">
      <div class="card">
        <h2>Readers Summary</h2>
        <div class="charts-container">
          <canvas id="readers-chart"></canvas>
        </div>
      </div>
      <div class="card">
        <h2>New Followers Summary</h2>
        <div class="charts-container">
          <canvas id="followers-chart"></canvas>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="card">
        <h2>Reactions Summary ❤🦄🔖</h2>
        <div class="charts-container">
          <canvas id="reactions-chart"></canvas>
        </div>
      </div>
      <div class="card">
        <h2>Comments Summary 💬</h2>
        <div class="charts-container">
          <canvas id="comments-chart"></canvas>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="card">
        <h2>Traffic Source Summary 🚦</h2>
        <table>
          <thead>
            <tr>
              <th>Source</th>
              <th>Views</th>
            </tr>
          </thead>

          <tbody id="referrers-container">
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<%= javascript_pack_tag "analyticsDashboard", defer: true %>
