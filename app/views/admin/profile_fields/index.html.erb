<div class="crayons-card grid p-6 mb-6 gap-1">
  <%= form_for [:admin, ProfileField.new], html: { class: "inline-form" } do |form| %>
    <div style="display: flex; align-items: center; justify-content: space-between;">
      <div class="form-group">
        <%= form.label :group %>
        <%= select_tag :group, options_for_select(ProfileField.distinct.pluck(:group)), include_blank: "Choose an existing group", class: "form-control selectpicker" %>
      </div>
      <div> OR </div>
      <div class="form-group">
        <%= form.label :group, style: "visibility: hidden" %>
        <%= form.text_field :group, placeholder: "Add a new group", class: "form-control" %>
      </div>
    </div>
    <div class="form-group">
      <%= render "form", form: form %>
      <%= form.submit class: "btn btn-primary" %>
    </div>
  <% end %>
</div>

<% @profile_fields.each do |group, fields| %>
  <h3>Group: <%= group %></h3>

  <% fields.each do |field| %>
    <div class="crayons-card grid p-6 mb-6 gap-1">
      <%= form_for [:admin, field] do |form| %>
        <div style="display: flex; align-items: center; justify-content: space-between;">
          <div class="form-group">
            <%= form.label :group %>
            <%= select_tag :group, options_for_select(ProfileField.distinct.pluck(:group), selected: field[:group]), class: "form-control selectpicker" %>
          </div>
          <div> OR </div>
          <div class="form-group">
            <%= form.label :group, style: "visibility: hidden" %>
            <%= form.text_field :group, placeholder: "Add a new group", class: "form-control" %>
          </div>
        </div>
        <%= render "form", form: form  %>
        <%= form.submit class: "btn btn-primary" %>
      <% end %>
      <%= button_to "Delete", admin_profile_field_path(field), data: { confirm: "Are you sure?" }, method: :delete, class: "btn btn-secondary" %>
    </div>
  <% end %>
<% end %>
