<% title "Comment Settings" %>

<style>
  .container {
    text-align: center;
    padding: 30px 0px;
  }

  @media screen and (min-width: 880px) {
    .container {
      margin-top: 100px;
    }
  }
</style>
<div class="container">
  <h1>Comment Settings</h1>

  <% if @notification_subscription.persisted? %>
    <h4>Don't want notifications for this thread?</h4>
    <p><em>This will mute all notifications for this comment and any of your comments in this chain.</em></p>
  <% else %>
    <p>All notifications for this comment and any of your comments in the thread are currently muted.</p>
  <% end %>
  <%= form_for(@notification_subscription, url: "/notification_subscriptions/Comment/#{@comment.id}", method: "post", html: { class: "mute-form" }) do |f| %>
    <input type="hidden" name="config" value="<%= @notification_subscription.persisted? ? "not_subscribed" : "all_comments" %>">
    <%= f.submit @notification_subscription.persisted? ? "MUTE NOTIFICATIONS" : "ðŸ”• NOTIFICATIONS MUTED (click to unmute)", class: "crayons-btn #{@notification_subscription.persisted? ? 'mute' : 'unmute'}" %>
  <% end %>

  <% if NotificationSubscription.where(user_id: current_user, notifiable_type: "Article", notifiable_id: @comment.commentable_id, config: "all_comments").any? %>
    <br /><br />
    <p><em>You are still subscribed to all comments in the broader thread, which will mean you will still receive notifications for replies to this comment.</em></p>
    <%= form_for(@notification_subscription, url: "/notification_subscriptions/Article/#{@comment.commentable_id}", method: "post", html: { class: "mute-form" }) do |f| %>
      <input type="hidden" name="config" value="not_subscribed">
      <%= f.submit "Unsubscribe from parent post", class: "crayons-btn crayons-btn--secondary" %>
    <% end %>
  <% end %>

  <br>
</div>
